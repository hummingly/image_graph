(()=>{"use strict";var t,i={14:(t,i,s)=>{var e=s(870);function n(t){return t*t}function o(t,i){const s=new Float32Array(2);return s[0]=t,s[1]=i,s}function r(t,[i,s]){t[0]+=i,t[1]+=s}function h(t,i){t[0]*=i,t[1]*=i}function c([t,i]){return n(t)+n(i)}function a(t){return Math.sqrt(c(t))}function u(t){const i=c(t);0!==i&&function(t,i){t[0]/=i,t[1]/=i}(t,Math.sqrt(i))}var f=s(663);class l{constructor(t){this.size=0,this.front=0,this.items=new Uint32Array(t),this.rear=t-1}enqueue(t){this.rear=(this.rear+1)%this.items.length,this.items[this.rear]=t,this.size+=1}dequeue(){if(0===this.size)return;const t=this.items[this.front];return this.front=(this.front+1)%this.items.length,this.size-=1,t}clear(){this.size=0,this.front=0,this.rear=this.items.length-1}}class p{constructor(t){this.score=new Map,this.size=0,this.items=new Uint32Array(t)}push(t,i){this.score.set(t,i);let s=this.size;this.items[s]=t,this.size+=1;let e=g(s);for(;void 0!==e&&1===this.cmp(e,s);)d(this.items,s,e),s=e,e=g(s)}pop(){if(0===this.size)return;this.size-=1;const t=this.items[this.size];if(0===this.size)return t;const i=this.items[0];return this.items[0]=t,this.minHeapify(0),i}setPriority(t,i){this.score.set(t,i)}getPriority(t){return this.score.get(t)}clear(){this.size=0,this.score.clear()}minHeapify(t){const i=2*t+1,s=2*t+2;let e=t;i<this.size&&-1===this.cmp(i,t)&&(e=i),s<this.size&&-1===this.cmp(s,t)&&(e=s),e!==t&&(d(this.items,t,e),this.minHeapify(e))}cmp(t,i){const s=this.score.get(this.items[t]),e=this.score.get(this.items[i]);return s>e?1:s===e?0:-1}}function d(t,i,s){[t[i],t[s]]=[t[s],t[i]]}function g(t){if(0!==t)return(t-1)/2}function y(t,i,s,e){const n=2*i,o=2*s;e[0]=t[n]-t[o],e[1]=t[n+1]-t[o+1]}function m(t,i,s){const e=2*i;s[0]=t[e],s[1]=t[e+1]}function w(t,i){const s=2*i;return t.slice(s,s+2)}function b(t,i,s,e){const n=2*i;t[n]=s,t[n+1]=e}function L(t,i,[s,e]){const n=2*i;t[n]=s,t[n+1]=e}function j(t,i,[s,e]){const n=2*i;t[n]+=s,t[n+1]+=e}function z(t,i,s,e,n,o,c,u,f){for(const l of e)u.has(l)&&(y(o,l,t,s),h(s,.5*(a(s)/(F(f,n,l,t)*c)-1)),r(i,s))}function v(t,i,s,e,n,o,a,u,f){for(const e of n[t])u.has(e)&&(y(o,e,t,s),h(s,c(s)/a),r(i,s));for(const n of e){if(!u.has(n))continue;y(o,t,n,s);const e=c(s);0!==e&&(h(s,a/e*.05),r(i,s))}}function q(t,i,s,e){const n=[],o=new Set([e]);let r=e;t:do{for(const e of t[r])if(!o.has(e)){if(s.has(e)&&(n.push(e),3===n.length))break t;o.add(e),i.enqueue(e)}r=i.dequeue()}while(void 0!==r);return i.clear(),n}function A(t,i,s,e,n){const o=c(t),r=c(i),h=e[n];if(0==o||0===r)return h;const a=s[n],u=function([t,i],[s,e]){return t*s+i*e}(t,i)/Math.sqrt(o*r),f=h*(1+.15*u*(3>>+(a*u<=0)));return s[n]=u,e[n]=f,f}function H(t,i,s,e){const n=new Set;n.add(e);const o=[];let r=e;for(;void 0!==r&&o.length<=s;){o.push(r);for(const s of t[r])n.has(s)||(n.add(s),i.enqueue(s));r=i.dequeue()}return i.clear(),o.shift(),o}function x(t,i,s,e,n,r){const[h,c,a]=n,u=F(t,i,h,r)*e,f=F(t,i,c,r)*e,l=F(t,i,a,r)*e,p=F(t,i,h,c)*e,d=F(t,i,c,a)*e,g=F(t,i,a,h)*e,y=w(s,h),m=w(s,c),b=w(s,a),L=S(u,f,p),j=S(f,l,d),z=S(l,u,g),[v,q]=M(y,m,b,L),[A,H]=M(m,b,y,j),[x,k]=M(b,y,m,z);return o((v+A+x)/3,(q+H+k)/3)}function M(t,i,[s,e],[r,h]){let c=t[0]-i[0],a=t[1]-i[1];const u=n(c)+n(a);if(0===u)return i;const f=Math.sqrt(u);c/=f,a/=f;const l=i[0]+c*r,p=i[1]+a*r,d=c*h,g=-a*h,y=l-d,m=p-g,w=l+d,b=p+g;return n(s-y)+n(e-m)<n(s-w)+n(e-b)?o(y,m):o(w,b)}function F(t,i,s,e){let n=0,o=s;t.setPriority(s,0);t:do{n=t.getPriority(o);for(const s of i[o]){if(s==e){n+=1;break t}const i=t.getPriority(s);void 0===i?t.push(s,n+1):i>n&&t.setPriority(s,n+1)}o=t.pop()}while(void 0!==o);return t.clear(),n}function S(t,i,s){const e=(-n(t)+n(i)+n(s))/(2*i*s);return o(e*i,Math.sin(Math.acos(e))*i)}(0,e.Jj)(class{constructor(t){this.index=new Map,this.edgeUnitLength=200,this.subGraphCount=0,this.rounds=5,this.iteration=0,this.pos=new Float32Array(0),this.disp=new Float32Array(0),this.heat=new Float32Array(0),this.cos=new Float32Array(0),this.adjacencyList=[],this.neighbourHoods=new Map,this.neighbourHoodSize=0,this.filtration=new Uint32Array(0),this.offsets=[],this.queue=new l(0),this.priorityQueue=new p(0),this.placedVertices=new Set,this.tempDisp=new Float32Array(2),this.tempDelta=new Float32Array(2),this.oldDisp=new Float32Array(2);const i=t.nodeCount;this.filtration=new Uint32Array(i),this.pos=new Float32Array(2*i),this.disp=new Float32Array(2*i),this.heat=new Float32Array(i),this.cos=new Float32Array(i),this.cos.fill(1),this.priorityQueue=new p(i),this.queue=new l(i),this.adjacencyList=t.adjacencyList,this.index=t.index}get edgeLength(){return this.edgeUnitLength}buildGraph(t,i){this.edgeUnitLength=2*i;for(let i=0;i<t.length;i++){const s=t[i],e=this.index.get(s);this.filtration[i]=e}this.offsets=function(t,i,s){const e=(0,f.ZE)("mis_filtration");const n=new Set;function o(i,s,e){if(s!==e)for(const r of t[i])n.has(r)||(n.add(r),o(r,s+1,e))}const r=[s];let h=0,c=0,a=s;for(;c<s&&r[h]>3;){c=Math.pow(2,h);let t=0;for(;t<a;){d(i,t,t+(u=a-t,Math.trunc(Math.min(e.quick()*u,u-1))));const s=i[t];n.add(s),o(s,0,c),t+=1;for(let s=t;s<a;s++)n.has(i[s])&&(a-=1,s!==a&&n.has(i[a])&&(a-=1),d(i,a,s));n.clear()}if(r[h]===t)break;r.push(t),h+=1}var u;return r[h]=3,r}(this.adjacencyList,this.filtration,t.length),console.debug(this.filtration,this.offsets);let s=0;for(const t of this.adjacencyList)s+=t.size;s/=t.length,this.neighbourHoodSize=s*this.offsets.length,this.heat.fill(this.edgeLength/6),this.subGraphCount=t.length}initLayout(){const[t,i,s]=this.filtration.slice(0,3),e=this.edgeLength,n=F(this.priorityQueue,this.adjacencyList,t,i)*e,o=F(this.priorityQueue,this.adjacencyList,i,s)*e,r=F(this.priorityQueue,this.adjacencyList,s,t)*e,[h,c]=S(n,o,r);b(this.pos,s,0,0),b(this.pos,i,h,c),b(this.pos,t,r,0),this.placedVertices.add(t),this.placedVertices.add(i),this.placedVertices.add(s);const a=this.neighbourHoodSize,u=H(this.adjacencyList,this.queue,a,t),f=H(this.adjacencyList,this.queue,a,i),l=H(this.adjacencyList,this.queue,a,s);function p(t,i){for(let s=t.length-1;s>=0;s--)if(t[s]===i)return;t.push(i)}p(u,i),p(u,s),p(f,t),p(f,s),p(l,t),p(l,i),this.neighbourHoods.set(t,u),this.neighbourHoods.set(i,f),this.neighbourHoods.set(s,l),this.rounds=5;const d=this.offsets.length-1;this.refineLayout(d),this.iteration=d-1;for(let t=0;t<30;t++)this.tick(),this.centerGraph();this.scaleHeat(.5)}tick(){const t=this.iteration;if(t>-1){for(let i=this.offsets[t+1];i<this.offsets[t];i++){const t=this.filtration[i];this.neighbourHoods.set(t,H(this.adjacencyList,this.queue,this.neighbourHoodSize,t));const s=q(this.adjacencyList,this.queue,this.placedVertices,t),e=x(this.priorityQueue,this.adjacencyList,this.pos,this.edgeLength,s,t);L(this.pos,t,e),this.placedVertices.add(t)}this.iteration-=1}this.refineLayout(Math.max(t,0))}centerGraph(){for(let t=0;t<this.subGraphCount;t++){const i=2*this.filtration[t];this.pos[i]*=.75,this.pos[i+1]*=.75}}refineLayout(t){const i=t>0?z:v,s=this.offsets[t];this.rounds=Math.min(30,s);const e=this.tempDelta,o=this.tempDisp,r=this.oldDisp,c=n(this.edgeLength);for(let t=0;t<this.rounds;t++){for(let t=0;t<s;t++){const s=this.filtration[t],n=this.neighbourHoods.get(s);if(void 0===n)continue;m(this.disp,s,r),o[0]=0,o[1]=0,i(s,o,e,n,this.adjacencyList,this.pos,c,this.placedVertices,this.priorityQueue);const a=A(o,r,this.cos,this.heat,s);u(o),h(o,a),L(this.disp,s,o)}for(let t=0;t<s;t++){const i=this.filtration[t];m(this.disp,i,o),j(this.pos,i,o)}}}scaleHeat(t){for(let i=0;i<this.heat.length;i++)this.heat[i]*=t}})}},s={};function e(t){if(s[t])return s[t].exports;var n=s[t]={exports:{}};return i[t](n,n.exports,e),n.exports}e.m=i,e.x=()=>e(14),e.d=(t,i)=>{for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},e.f={},e.e=t=>Promise.all(Object.keys(e.f).reduce(((i,s)=>(e.f[s](t,i),i)),[])),e.u=t=>t+".index.js",e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),e.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),t=e.x,e.x=()=>e.e(189).then(t),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var i=e.g.document;if(!t&&i&&(i.currentScript&&(t=i.currentScript.src),!t)){var s=i.getElementsByTagName("script");s.length&&(t=s[s.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),(()=>{var t={14:1};e.f.i=(i,s)=>{t[i]||importScripts(""+e.u(i))};var i=self.webpackChunkimage_graph=self.webpackChunkimage_graph||[],s=i.push.bind(i);i.push=i=>{var[n,o,r]=i;for(var h in o)e.o(o,h)&&(e.m[h]=o[h]);for(r&&r(e);n.length;)t[n.pop()]=1;s(i)}})(),e.x()})();